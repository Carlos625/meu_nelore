import{f as j,e as y,r,j as e}from"./index-COgq7w1N.js";import{l as N,d as b,j as c,I as x,m as v}from"./firestore-DFEv3qpL.js";function I(){const{id:i}=j(),m=y(),[g,n]=r.useState(!0),[s,u]=r.useState(null),[a,f]=r.useState(null),[l,d]=r.useState("");r.useEffect(()=>{h()},[i]);async function h(){if(i)try{n(!0);const t=await N(i);if(t){if(u(t),t.animalId){const o=await b(t.animalId);o&&f(o)}}else d("Incidente não encontrado")}catch(t){console.error("Erro ao carregar dados:",t),d("Erro ao carregar dados do incidente")}finally{n(!1)}}async function p(){if(s&&window.confirm("Tem certeza que deseja excluir este incidente?"))try{n(!0),await v(s.id),m("/incidentes")}catch(t){console.error("Erro ao excluir incidente:",t),d("Erro ao excluir incidente"),n(!1)}}return g?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l||!s?e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm font-medium text-red-800",children:l||"Incidente não encontrado"})})})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Detalhes do Incidente"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>m(`/incidentes/editar/${s.id}`),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Editar"}),e.jsx("button",{onClick:p,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Excluir"})]})]}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Informações do Incidente"})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("dl",{children:[a&&e.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Animal"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsxs("div",{className:"flex items-center",children:[a.foto?e.jsx("img",{src:a.foto,alt:`Animal ${a.numeroBrinco}`,className:"h-12 w-12 rounded-full object-cover"}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-lg font-medium",children:a.numeroBrinco})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Brinco ",a.numeroBrinco]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.raca})]})]})})]}),e.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tipo"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:[s.tipo===c.DOENCA&&"Doença",s.tipo===c.FERIMENTO&&"Ferimento",s.tipo===c.OUTRO&&"Outro"]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.status===x.PENDENTE?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.status===x.PENDENTE?"Pendente":"Resolvido"})})]}),e.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Data"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:s.data instanceof Date?s.data.toLocaleDateString():s.data.toDate().toLocaleDateString()})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Descrição"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:s.descricao})]})]})})]})]})}export{I as default};
